Buttermilk Doughnuts
2 cups vegetable oil for frying 2 cups buttermilk 1 cup white sugar 2 large eggs, beaten 5 cups sifted all-purpose flour 2 teaspoons baking soda 1 teaspoon baking powder 1 teaspoon salt 1 teaspoon ground nutmeg ¼ teaspoon ground cinnamon ½ cup melted butter 3 cups confectioners' sugar 1 tablespoon margarine, softened (Optional) ½ teaspoon vanilla extract 2 tablespoons milk, or as needed 