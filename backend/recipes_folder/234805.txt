Chef John's Sweet Potato Casserole
2 ½ pounds sweet potatoes, peeled and cubed salt 2 tablespoons butter 2 large eggs ¼ cup maple syrup ¼ cup buttermilk ⅓ cup milk ½ teaspoon vanilla extract ½ teaspoon salt 1 pinch ground allspice 1 pinch cayenne pepper ½ cup chopped roasted, salted pistachios ½ cup light brown sugar ⅓ cup all-purpose flour ¼ cup butter, melted 