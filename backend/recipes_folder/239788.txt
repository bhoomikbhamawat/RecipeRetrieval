Chef John's Chicken Lettuce Wraps
1 ½ pounds skinless, boneless chicken thighs, coarsely chopped 1 (8 ounce) can water chestnuts, drained and minced 1 cup diced shiitake mushroom caps ½ cup minced yellow onion ⅓ cup chopped green onion 1 tablespoon soy sauce 1 tablespoon freshly grated ginger 2 teaspoons brown sugar ¼ cup chicken stock ¼ cup rice wine vinegar 4 cloves garlic, minced 1 tablespoon ketchup 1 tablespoon soy sauce 2 teaspoons sesame oil 2 teaspoons brown sugar ½ teaspoon red pepper flakes ½ teaspoon dry mustard 2 tablespoons vegetable oil 1 ½ tablespoons chopped fresh cilantro, or to taste 1 ½ tablespoons chopped fresh basil, or to taste 1 ½ tablespoons chopped green onion, or to taste 16 leaves iceberg lettuce, or as needed 