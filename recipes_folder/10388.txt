Deluxe Chocolate Marshmallow Bars
¾ cup butter1 ½ cups white sugar3 eggs1 teaspoon vanilla extract1 ⅓ cups all-purpose flour½ teaspoon baking powder½ teaspoon salt3 tablespoons cocoa powder½ cup chopped walnuts (Optional)4 cups miniature marshmallows1 ⅓ cups semisweet chocolate chips3 tablespoons butter1 cup peanut butter2 cups crisp rice cereal