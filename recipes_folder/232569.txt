Apple Cheesecake Pie
½ cup softened butter⅓ cup white sugar1 teaspoon vanilla extract1 cup all-purpose flour, or as needed1 (8 ounce) package cream cheese, softened1 egg¼ cup white sugar1 tablespoon vanilla extract4 cups peeled and sliced apples⅓ cup white sugar2 tablespoons ground cinnamon¼ cup sliced almonds (Optional)