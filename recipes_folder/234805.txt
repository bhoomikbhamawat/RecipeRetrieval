Chef John's Sweet Potato Casserole
2 ½ pounds sweet potatoes, peeled and cubedsalt2 tablespoons butter2 large eggs¼ cup maple syrup¼ cup buttermilk⅓ cup milk½ teaspoon vanilla extract½ teaspoon salt1 pinch ground allspice1 pinch cayenne pepper½ cup chopped roasted, salted pistachios½ cup light brown sugar⅓ cup all-purpose flour¼ cup butter, melted