Buttermilk Doughnuts
2 cups vegetable oil for frying2 cups buttermilk1 cup white sugar2 large eggs, beaten5 cups sifted all-purpose flour2 teaspoons baking soda1 teaspoon baking powder1 teaspoon salt1 teaspoon ground nutmeg¼ teaspoon ground cinnamon½ cup melted butter3 cups confectioners' sugar1 tablespoon margarine, softened (Optional)½ teaspoon vanilla extract2 tablespoons milk, or as needed