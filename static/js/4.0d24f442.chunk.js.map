{"version":3,"sources":["Config/fire.js","Store/Url.js","Store/Actioncreator.js","Components/ImagePredict.jsx","Components/CommonIngredients.jsx","Components/Results.jsx","Components/Home.jsx"],"names":["require","fire","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","storage","apiUrl","database","ref","on","data","console","log","val","ImagePredict","props","inputs","dispatch","useDispatch","useState","loading","setLoading","deleteRow","i","index","a","type","ActionTypes","Table","Header","Row","HeaderCell","Body","map","image","Cell","Image","src","img","size","Button","icon","onClick","Label","Footer","colSpan","className","Spinner","Input","accept","onChange","e","file","target","files","uploadTask","name","put","snapShot","err","errmess","then","res","content","child","getDownloadURL","uploadContent","axios","post","response","catch","error","getData","url","pred","addInput","CommonIngredients","Dropdown","placeholder","fluid","multiple","search","selection","clearable","options","key","text","value","items","Results","setData","query","ingredients","ing","images","slice","disabled","floated","getResult","Accordion","defaultActiveIndex","panels","connect","state","input","setIndex","steps","Container","Col","Icon","length"],"mappings":"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","file":"static/js/4.0d24f442.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nrequire(\"firebase/auth\");\nrequire(\"firebase/database\");\nrequire(\"firebase/storage\");\n\nvar firebaseConfig = {\n  apiKey: \"AIzaSyAAYmzTCsgF4r9wXv0Tv0GwT3j0mqsM_eQ\",\n  authDomain: \"ir-project-d1527.firebaseapp.com\",\n  projectId: \"ir-project-d1527\",\n  storageBucket: \"ir-project-d1527.appspot.com\",\n  messagingSenderId: \"437213427392\",\n  appId: \"1:437213427392:web:036fad3d28f61d4a481f25\",\n};\n\nconst fire = firebase.initializeApp(firebaseConfig);\n\nexport const storage = firebase.storage();\nexport default fire;\n","import fire from \"../Config/fire\";\n\nexport let apiUrl = \"http://127.0.0.1:5000/\";\n\nfire\n  .database()\n  .ref(\"url\")\n  .on(\"value\", (data) => {\n    console.log(data.val());\n    apiUrl = data.val();\n  });\n","import * as ActionTypes from \"./ActionTypes\";\nimport { storage } from \"../Config/fire\";\nimport axios from \"axios\";\nimport { apiUrl } from \"./Url\";\n\nconsole.log(apiUrl);\nexport const uploadContent = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.UPLOAD_REQUEST });\n    const uploadTask = storage.ref(`/${data.file.name}`).put(data.file);\n    uploadTask.on(\n      \"state_changed\",\n      (snapShot) => {},\n      (err) => {\n        console.log(err);\n        dispatch({ type: ActionTypes.UPLOAD_FAILED, errmess: err });\n      },\n      () => {\n        dispatch({ type: ActionTypes.UPLOAD_SUCCESS });\n      }\n    );\n    return await uploadTask.then((res) =>\n      storage.ref(data.content).child(data.file.name).getDownloadURL()\n    );\n  };\n};\n\nexport const getData = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.DATA_REQUEST });\n    return await axios\n      .post(`${apiUrl}`, data)\n      .then((response) => {\n        dispatch({\n          type: ActionTypes.DATA_SUCCESS,\n          data: response.data.response,\n        });\n        return response.data.response;\n      })\n      .catch((error) => {\n        console.log(apiUrl,error);\n        dispatch({\n          type: ActionTypes.DATA_FAILED,\n          errmess: \"Error in connection with Server\",\n        });\n      });\n  };\n};\n\nexport const getResult = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.RESULT_REQUEST, data });\n    return await axios\n      .post(`${apiUrl}results`, data)\n      .then((response) => {\n        dispatch({\n          type: ActionTypes.RESULT_SUCCESS,\n          data: response.data,\n        });\n        return response?.data?.data\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({\n          type: ActionTypes.RESULT_FAILED,\n          errmess: \"Error in connection with Server\",\n        });\n      });\n  };\n};\n\nexport const addInput = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.IMAGE_ADD_SUCCESS, ...data });\n  };\n};\n\nexport const deleteInput = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.IMAGE_DELETE_SUCCESS, ...data });\n  };\n};\n\nexport const addCommonIngredient = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.INGREDIENT_ADD_SUCCESS, ...data });\n  };\n};\n","import { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Spinner } from \"reactstrap\";\nimport { Button, Image, Input, Label, Table } from \"semantic-ui-react\";\nimport {\n  addInput,\n  getData,\n  uploadContent,\n  deleteInput,\n} from \"../Store/Actioncreator\";\n\nfunction ImagePredict(props) {\n  const { inputs } = props;\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const handleUpload = (e) => {\n    setLoading(true);\n    const file = e?.target?.files[0];\n    if (file) {\n      const data = {\n        file: file,\n      };\n      dispatch(uploadContent(data)).then((res) => {\n        dispatch(getData({ url: res })).then((pred) => {\n          dispatch(addInput({ image: res, pred: pred }));\n          setLoading(false);\n        });\n      });\n    }\n  };\n  const deleteRow = (i) => {\n    dispatch(deleteInput({ index: i }));\n  };\n\n  return (\n    <Table>\n      <Table.Header>\n        <Table.Row>\n          <Table.HeaderCell>Image</Table.HeaderCell>\n          <Table.HeaderCell>Prediction</Table.HeaderCell>\n        </Table.Row>\n      </Table.Header>\n      <Table.Body>\n        {inputs.map((image, i) => (\n          <Table.Row key={i}>\n            <Table.Cell>\n              <Image src={image.img} size=\"small\" />\n              <Button icon=\"trash\" onClick={() => deleteRow(i)} />\n            </Table.Cell>\n            <Table.Cell>\n              <Label> {image.data}</Label>\n            </Table.Cell>\n          </Table.Row>\n        ))}\n      </Table.Body>\n      <Table.Footer>\n        <Table.Row>\n          <Table.HeaderCell />\n          <Table.HeaderCell colSpan=\"3\">\n            {loading ? (\n              <>\n                <p className=\"text-muted\">\n                  <Spinner />\n                  Uploading and analyzing the image\n                </p>\n              </>\n            ) : (\n              <Input\n                type=\"file\"\n                accept=\"Image/*\"\n                onChange={handleUpload}\n                className=\"float-right\"\n              />\n            )}\n          </Table.HeaderCell>\n        </Table.Row>\n      </Table.Footer>\n    </Table>\n  );\n}\n\nexport default ImagePredict;\n","import { useDispatch } from \"react-redux\";\nimport { Dropdown } from \"semantic-ui-react\";\nimport { addCommonIngredient } from \"../Store/Actioncreator\";\n\nfunction CommonIngredients(props) {\n  const { inputs } = props;\n  const dispatch = useDispatch();\n  const options = [\n    { key: 0, text: \"Pepper\", value: \"Pepper\" },\n    { key: 1, text: \"Turmeric\", value: \"Turmeric\" },\n    { key: 2, text: \"Cilantro\", value: \"Cilantro\" },\n    { key: 3, text: \"flour\", value: \"flour\" },\n    { key: 4, text: \"Salt\", value: \"Salt\" },\n    { key: 5, text: \"Olive oil\", value: \"Olive\" },\n    { key: 6, text: \"Cumin\", value: \"Cumin\" },\n    { key: 7, text: \"Cream\", value: \"Cream\" },\n    { key: 8, text: \"Cinnamon\", value: \"Cinnamon\" },\n    { key: 9, text: \"Thyme\", value: \"Thyme\" },\n    { key: 10, text: \"Cloves\", value: \"Cloves\" },\n    { key: 11, text: \"Ketchup\", value: \"Ketchup\" },\n    { key: 12, text: \"Vanilla\", value: \"Vanilla\" },\n    { key: 13, text: \"Baking Powder\", value: \"Baking\" },\n    { key: 14, text: \"Wine\", value: \"Wine\" },\n    { key: 15, text: \"Sugar\", value: \"Sugar\" },\n    { key: 16, text: \"Peanut Butter\", value: \"Peanut Butter\" },\n    { key: 17, text: \"cornstarch\", value: \"cornstarch\" },\n    { key: 18, text: \"Soda\", value: \"Soda\" },\n    { key: 19, text: \"Mustard\", value: \"Mustard\" },\n    { key: 20, text: \"Soy(Sauce)\", value: \"soy\" },\n  ];\n\n  const modify = (e, { value }) => {\n    dispatch(addCommonIngredient({ items: value }));\n  };\n  return (\n    <>\n      <h3>Select some of the common ingredients from below</h3>\n      <Dropdown\n        placeholder=\"Ingredients\"\n        fluid\n        multiple\n        search\n        selection\n        clearable\n        options={options}\n        value={inputs}\n        onChange={modify}\n      />\n    </>\n  );\n}\n\nexport default CommonIngredients;\n","import { Accordion, Button, Label } from \"semantic-ui-react\";\nimport { useDispatch } from \"react-redux\";\nimport { getResult } from \"../Store/Actioncreator\";\nimport { useState } from \"react\";\nimport { Spinner } from \"reactstrap\";\n\nfunction Results(props) {\n  const { inputs } = props;\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState([]);\n  let query = \"\";\n  inputs.ingredients.map((ing) => (query += ing + \", \"));\n  inputs.images.map((ing) => (query += ing.data + \", \"));\n  query = query.slice(0, -2);\n  const dispatch = useDispatch();\n  const submit = () => {\n    setLoading(true);\n    dispatch(getResult({ query })).then((res) => {\n      setData(res);\n      setLoading(false);\n    });\n  };\n\n  return (\n    <div>\n      Final Query: <Label>{query}</Label>\n      <Button disabled={loading} floated=\"right\" onClick={submit}>\n        {loading ? <Spinner /> : \"Get Recipes\"}\n      </Button>\n      <hr />\n      <Accordion defaultActiveIndex={1} panels={data} />\n    </div>\n  );\n}\n\nexport default Results;\n","import { Col, Container, Row } from \"reactstrap\";\nimport { connect } from \"react-redux\";\nimport ImagePredict from \"./ImagePredict\";\nimport { Button, Icon } from \"semantic-ui-react\";\nimport { useState } from \"react\";\nimport CommonIngredients from \"./CommonIngredients\";\nimport Results from \"./Results\";\n\nfunction Home(props) {\n  const [index, setIndex] = useState(0);\n\n  const steps = [\n    <ImagePredict inputs={props.input.images} />,\n    <CommonIngredients inputs={props.input.ingredients} />,\n    <Results inputs={props.input} />,\n  ];\n  return (\n    <Container>\n      <Row>\n        <Col className=\"text-center shadow p-3 bg-white mt-3 rounded\">\n          <h1 className=\"text-grad\">Information Retrieval Project</h1>\n          <h2>Recipe Retrieval System</h2>\n        </Col>\n      </Row>\n      <Row className=\" shadow p-3 mt-3 bg-white rounded\">\n        <Col>\n          {index > 0 && (\n            <Button floated=\"left\" onClick={() => setIndex(index - 1)}>\n              <Icon name=\"arrow alternate circle left\" /> Back\n            </Button>\n          )}\n\n          {index < steps.length - 1 && (\n            <Button floated=\"right\" onClick={() => setIndex(index + 1)}>\n              Next <Icon name=\"arrow alternate circle right\" />\n            </Button>\n          )}\n          <br />\n          <br />\n          {steps[index]}\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  input: state.input,\n});\n\nexport default connect(mapStateToProps, null)(Home);\n"],"sourceRoot":""}