{"version":3,"sources":["Config/fire.js","Store/Url.js","Components/ImagePredict.jsx","Store/Actioncreator.js","Components/CommonIngredients.jsx","Components/Results.jsx","Components/Home.jsx"],"names":["require","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","storage","apiUrl","ImagePredict","props","inputs","dispatch","useDispatch","useState","loading","setLoading","deleteRow","i","data","index","a","type","ActionTypes","Table","Header","Row","HeaderCell","Body","map","image","Cell","Image","src","img","size","Button","icon","onClick","Label","Footer","colSpan","className","Spinner","Input","accept","onChange","e","file","target","files","uploadTask","ref","name","put","on","snapShot","err","console","log","errmess","then","res","content","child","getDownloadURL","uploadContent","axios","post","response","catch","error","getData","url","pred","addInput","CommonIngredients","Dropdown","placeholder","fluid","multiple","search","selection","clearable","options","key","text","value","items","Results","setData","query","ingredients","ing","images","slice","disabled","floated","getResult","Accordion","defaultActiveIndex","panels","connect","state","input","setIndex","steps","Container","Col","Icon","length"],"mappings":"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","file":"static/js/4.98924684.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nrequire(\"firebase/auth\");\nrequire(\"firebase/database\");\nrequire(\"firebase/storage\");\n\nvar firebaseConfig = {\n  apiKey: \"AIzaSyAAYmzTCsgF4r9wXv0Tv0GwT3j0mqsM_eQ\",\n  authDomain: \"ir-project-d1527.firebaseapp.com\",\n  projectId: \"ir-project-d1527\",\n  storageBucket: \"ir-project-d1527.appspot.com\",\n  messagingSenderId: \"437213427392\",\n  appId: \"1:437213427392:web:036fad3d28f61d4a481f25\",\n};\n\nconst fire = firebase.initializeApp(firebaseConfig);\n\nexport const storage = firebase.storage();\nexport default fire;\n","export const apiUrl='http://127.0.0.1:5000/'","import { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Spinner } from \"reactstrap\";\nimport { Button, Image, Input, Label, Table } from \"semantic-ui-react\";\nimport {\n  addInput,\n  getData,\n  uploadContent,\n  deleteInput,\n} from \"../Store/Actioncreator\";\n\nfunction ImagePredict(props) {\n  const { inputs } = props;\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const handleUpload = (e) => {\n    setLoading(true);\n    const file = e?.target?.files[0];\n    if (file) {\n      const data = {\n        file: file,\n      };\n      dispatch(uploadContent(data)).then((res) => {\n        dispatch(getData({ url: res })).then((pred) => {\n          dispatch(addInput({ image: res, pred: pred }));\n          setLoading(false);\n        });\n      });\n    }\n  };\n  const deleteRow = (i) => {\n    dispatch(deleteInput({ index: i }));\n  };\n\n  return (\n    <Table>\n      <Table.Header>\n        <Table.Row>\n          <Table.HeaderCell>Image</Table.HeaderCell>\n          <Table.HeaderCell>Prediction</Table.HeaderCell>\n        </Table.Row>\n      </Table.Header>\n      <Table.Body>\n        {inputs.map((image, i) => (\n          <Table.Row key={i}>\n            <Table.Cell>\n              <Image src={image.img} size=\"small\" />\n              <Button icon=\"trash\" onClick={() => deleteRow(i)} />\n            </Table.Cell>\n            <Table.Cell>\n              <Label> {image.data}</Label>\n            </Table.Cell>\n          </Table.Row>\n        ))}\n      </Table.Body>\n      <Table.Footer>\n        <Table.Row>\n          <Table.HeaderCell />\n          <Table.HeaderCell colSpan=\"3\">\n            {loading ? (\n              <>\n                <p className=\"text-muted\">\n                  <Spinner />\n                  Uploading and analyzing the image\n                </p>\n              </>\n            ) : (\n              <Input\n                type=\"file\"\n                accept=\"Image/*\"\n                onChange={handleUpload}\n                className=\"float-right\"\n              />\n            )}\n          </Table.HeaderCell>\n        </Table.Row>\n      </Table.Footer>\n    </Table>\n  );\n}\n\nexport default ImagePredict;\n","import * as ActionTypes from \"./ActionTypes\";\nimport { storage } from \"../Config/fire\";\nimport axios from \"axios\";\nimport { apiUrl } from \"./Url\";\n\nexport const uploadContent = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.UPLOAD_REQUEST });\n    const uploadTask = storage.ref(`/${data.file.name}`).put(data.file);\n    uploadTask.on(\n      \"state_changed\",\n      (snapShot) => {},\n      (err) => {\n        console.log(err);\n        dispatch({ type: ActionTypes.UPLOAD_FAILED, errmess: err });\n      },\n      () => {\n        dispatch({ type: ActionTypes.UPLOAD_SUCCESS });\n      }\n    );\n    return await uploadTask.then((res) =>\n      storage.ref(data.content).child(data.file.name).getDownloadURL()\n    );\n  };\n};\n\nexport const getData = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.DATA_REQUEST });\n    return await axios\n      .post(`${apiUrl}`, data)\n      .then((response) => {\n        dispatch({\n          type: ActionTypes.DATA_SUCCESS,\n          data: response.data.response,\n        });\n        return response.data.response;\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({\n          type: ActionTypes.DATA_FAILED,\n          errmess: \"Error in connection with Server\",\n        });\n      });\n  };\n};\n\nexport const getResult = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.RESULT_REQUEST, data });\n    return await axios\n      .post(`${apiUrl}results`, data)\n      .then((response) => {\n        dispatch({\n          type: ActionTypes.RESULT_SUCCESS,\n          data: response.data,\n        });\n        return response?.data?.data\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({\n          type: ActionTypes.RESULT_FAILED,\n          errmess: \"Error in connection with Server\",\n        });\n      });\n  };\n};\n\nexport const addInput = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.IMAGE_ADD_SUCCESS, ...data });\n  };\n};\n\nexport const deleteInput = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.IMAGE_DELETE_SUCCESS, ...data });\n  };\n};\n\nexport const addCommonIngredient = (data) => {\n  return async (dispatch) => {\n    dispatch({ type: ActionTypes.INGREDIENT_ADD_SUCCESS, ...data });\n  };\n};\n","import { useDispatch } from \"react-redux\";\nimport { Dropdown } from \"semantic-ui-react\";\nimport { addCommonIngredient } from \"../Store/Actioncreator\";\n\nfunction CommonIngredients(props) {\n  const { inputs } = props;\n  const dispatch = useDispatch();\n  const options = [\n    { key: 0, text: \"Pepper\", value: \"Pepper\" },\n    { key: 1, text: \"Turmeric\", value: \"Turmeric\" },\n    { key: 2, text: \"Cilantro\", value: \"Cilantro\" },\n    { key: 3, text: \"flour\", value: \"flour\" },\n    { key: 4, text: \"Salt\", value: \"Salt\" },\n    { key: 5, text: \"Olive oil\", value: \"Olive\" },\n    { key: 6, text: \"Cumin\", value: \"Cumin\" },\n    { key: 7, text: \"Cream\", value: \"Cream\" },\n    { key: 8, text: \"Cinnamon\", value: \"Cinnamon\" },\n    { key: 9, text: \"Thyme\", value: \"Thyme\" },\n    { key: 10, text: \"Cloves\", value: \"Cloves\" },\n    { key: 11, text: \"Ketchup\", value: \"Ketchup\" },\n    { key: 12, text: \"Vanilla\", value: \"Vanilla\" },\n    { key: 13, text: \"Baking Powder\", value: \"Baking\" },\n    { key: 14, text: \"Wine\", value: \"Wine\" },\n    { key: 15, text: \"Sugar\", value: \"Sugar\" },\n    { key: 16, text: \"Peanut Butter\", value: \"Peanut Butter\" },\n    { key: 17, text: \"cornstarch\", value: \"cornstarch\" },\n    { key: 18, text: \"Soda\", value: \"Soda\" },\n    { key: 19, text: \"Mustard\", value: \"Mustard\" },\n    { key: 20, text: \"Soy(Sauce)\", value: \"soy\" },\n  ];\n\n  const modify = (e, { value }) => {\n    dispatch(addCommonIngredient({ items: value }));\n  };\n  return (\n    <>\n      <h3>Select some of the common ingredients from below</h3>\n      <Dropdown\n        placeholder=\"Ingredients\"\n        fluid\n        multiple\n        search\n        selection\n        clearable\n        options={options}\n        value={inputs}\n        onChange={modify}\n      />\n    </>\n  );\n}\n\nexport default CommonIngredients;\n","import { Accordion, Button, Label } from \"semantic-ui-react\";\nimport { useDispatch } from \"react-redux\";\nimport { getResult } from \"../Store/Actioncreator\";\nimport { useState } from \"react\";\nimport { Spinner } from \"reactstrap\";\n\nfunction Results(props) {\n  const { inputs } = props;\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState([]);\n  let query = \"\";\n  inputs.ingredients.map((ing) => (query += ing + \", \"));\n  inputs.images.map((ing) => (query += ing.data + \", \"));\n  query = query.slice(0, -2);\n  const dispatch = useDispatch();\n  const submit = () => {\n    setLoading(true);\n    dispatch(getResult({ query })).then((res) => {\n      setData(res);\n      setLoading(false);\n    });\n  };\n\n  return (\n    <div>\n      Final Query: <Label>{query}</Label>\n      <Button disabled={loading} floated=\"right\" onClick={submit}>\n        {loading ? <Spinner /> : \"Get Recipes\"}\n      </Button>\n      <hr />\n      <Accordion defaultActiveIndex={1} panels={data} />\n    </div>\n  );\n}\n\nexport default Results;\n","import { Col, Container, Row } from \"reactstrap\";\nimport { connect } from \"react-redux\";\nimport ImagePredict from \"./ImagePredict\";\nimport { Button, Icon } from \"semantic-ui-react\";\nimport { useState } from \"react\";\nimport CommonIngredients from \"./CommonIngredients\";\nimport Results from \"./Results\";\n\nfunction Home(props) {\n  const [index, setIndex] = useState(0);\n\n  const steps = [\n    <ImagePredict inputs={props.input.images} />,\n    <CommonIngredients inputs={props.input.ingredients} />,\n    <Results inputs={props.input} />,\n  ];\n  return (\n    <Container>\n      <Row>\n        <Col className=\"text-center shadow p-3 bg-white mt-3 rounded\">\n          <h1 className=\"text-grad\">Information Retrieval Project</h1>\n          <h2>Recipe Retrieval System</h2>\n        </Col>\n      </Row>\n      <Row className=\" shadow p-3 mt-3 bg-white rounded\">\n        <Col>\n          {index > 0 && (\n            <Button floated=\"left\" onClick={() => setIndex(index - 1)}>\n              <Icon name=\"arrow alternate circle left\" /> Back\n            </Button>\n          )}\n\n          {index < steps.length - 1 && (\n            <Button floated=\"right\" onClick={() => setIndex(index + 1)}>\n              Next <Icon name=\"arrow alternate circle right\" />\n            </Button>\n          )}\n          <br />\n          <br />\n          {steps[index]}\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  input: state.input,\n});\n\nexport default connect(mapStateToProps, null)(Home);\n"],"sourceRoot":""}